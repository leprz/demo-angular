@if(uiTodoList$ | async; as todoList) {
  <ui-loaded-content
    [content]="todoList"
    >
    <div class="todo-list">
      @if (todoList.value && todoList.value.length > 0) {
        @for (todoItem of todoList.value; track trackByFn($index, todoItem)) {
          <ui-todo-item
            class="todo-list__item"
            [todo]="todoItem"
            [fade]="todoItem.isComplete"
            @hide
            >
            <feature-permissions
              todo-item-prefix
              #featurePermissions>
              @if (featurePermissions.permissions$ | async; as permissions) {
                <feature-todo-resolution
                  [params]="todoItem"
                  [permissions]="permissions.value ?? []"
                  #todoResolution
                >
                  <feature-todo-list-resolution
                    (resolutionChanged)="todoResolution.updateResolution(todoItem, $event)"
                    [params]="todoItem">
                  </feature-todo-list-resolution>
                </feature-todo-resolution>
              }
            </feature-permissions>
            <feature-permissions
              todo-item-suffix
              #featurePermissions>
              @if (featurePermissions.permissions$ | async; as permissions) {
                <feature-todo-delete
                  [params]="todoItem"
                  [permissions]="permissions.value ?? []"
                  #todoDelete
                >
                  <feature-ui-todo-delete-button
                    (click)="todoDelete.delete(todoItem)"
                    [isDisabled]="todoDelete.isDisabled()"
                    [deleteResult]="todoDelete.deleteResult$ | async">
                  </feature-ui-todo-delete-button>
                </feature-todo-delete>
              }
            </feature-permissions>
          </ui-todo-item>
        }
      } @else {
        <h2>No results found</h2>
      }
    </div>
  </ui-loaded-content>
}


